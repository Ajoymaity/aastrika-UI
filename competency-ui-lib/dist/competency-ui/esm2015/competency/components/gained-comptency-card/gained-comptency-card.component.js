import * as tslib_1 from "tslib";
import { Component } from '@angular/core';
import { forkJoin } from 'rxjs';
import { GainedService } from '../../services/gained.service';
import { RequestUtil } from '../../services/request-util';
let GainedComptencyCardComponent = class GainedComptencyCardComponent {
    constructor(gainedService) {
        this.gainedService = gainedService;
        this.loading = false;
        this.panelOpenState = false;
        this.requestUtil = new RequestUtil();
    }
    ngOnInit() {
        this.loading = true;
        const allEntity = this.getAllEntity();
        const userPassbook = this.getAllUserPassbook();
        forkJoin([allEntity, userPassbook]).subscribe((res) => {
            const response = this.requestUtil.formatedGainedCompetency(res[0].result.response, res[1].result.content);
            this.gainedproficencyData = response;
            this.loading = false;
        });
    }
    getAllUserPassbook() {
        const reqBody = {
            "request": {
                "typeName": "competency"
            }
        };
        return this.gainedService.fetchUserPassbook(reqBody);
    }
    getAllEntity() {
        const reqBody = {
            "search": {
                "type": "Competency"
            }
        };
        return this.gainedService.fetchAllEntity(reqBody);
    }
};
GainedComptencyCardComponent.ctorParameters = () => [
    { type: GainedService }
];
GainedComptencyCardComponent = tslib_1.__decorate([
    Component({
        selector: 'lib-gained-comptency-card',
        template: "<lib-app-loader *ngIf=\"loading === true\"></lib-app-loader>\n<ng-container *ngFor=\"let proficency of gainedproficencyData\">\n<div class=\"card-container example-container container-balanced\">\n    <!-- <div class=\"date justify-end mr-2\">\n        {{date}}\n    </div> -->\n    <ng-container *ngIf=\"proficency?.title\">\n        <div class=\"title\">{{proficency?.title}}</div>\n    </ng-container>\n\n    <div class=\"levelsTitle\">\n        Levels:\n    </div>\n    <mat-accordion>\n        <mat-expansion-panel class=\"w-full panel\" hideToggle (opened)=\"panelOpenState = true\"\n            (closed)=\"panelOpenState = false\">\n            <mat-expansion-panel-header class=\"flex-between items-center panel-header w-full\">\n                <mat-panel-description class=\"panel-header-description\">\n                    <ng-container *ngFor=\"let proficiency of proficency?.proficiencyLevels\">\n                        <ng-container *ngIf=\"proficiency.selected; else addLevel\">\n                            <div class=\"level mb-1\" [ngStyle]=\"{'background-color': proficiency.color}\">\n                                {{proficiency?.displayLevel}}\n                            </div>\n                        </ng-container>\n                        <ng-template #addLevel>\n                            <div (click)=\"$event.stopPropagation();\" class=\"level mb-1 pointer-events\">\n                                {{proficiency?.displayLevel}}\n                            </div>\n                        </ng-template>\n                    </ng-container>\n                    <div class=\"level mb-1 pointer-events\">\n                        <mat-icon [ngClass]=\"{'arrowReverse': panelOpenState }\">keyboard_arrow_down</mat-icon>\n                    </div>\n                </mat-panel-description>\n            </mat-expansion-panel-header>\n            <div>\n                <span class=\"log-header\">Log:</span>\n                <ng-container *ngFor=\"let log of proficency?.logs; let logIndex = index\">\n                    <div class=\"log\">\n                        <div class=\"flex\">\n                            <ng-container *ngIf=\"log.header\">\n                                <span class=\"flex-1\">Level {{log.level}}: {{log.header}}</span>\n                                <span class=\"log-date mr-2\">{{log?.date| date:'dd/MM/yyyy'}}</span>\n                            </ng-container>\n                        </div>\n                        <ng-container *ngIf=\"log.description\">\n                            <div class=\"mt-2\" [ngClass]=\"{'hideContent': !log.keyboardArrowUp}\">{{log.description}}</div>\n                            <div class=\"justify-end\">\n                                <mat-icon (click)=\"log.keyboardArrowUp = !log.keyboardArrowUp\" class=\"mr-3 pointer-events\" [ngClass]=\"{'arrowReverse': log.keyboardArrowUp }\">keyboard_arrow_down</mat-icon>\n                            </div>\n                        </ng-container>\n                    </div>\n                </ng-container>\n            </div>\n        </mat-expansion-panel>\n    </mat-accordion>\n</div>\n</ng-container>",
        styles: [":root{font-size:16px;--blue:#1C5D95;--yellow:#FFF4DF;--teal:#A4DFCA;--black:#000000;--white:#ffffff;--light-gray:#eff6fc;--grey-100:#DFEDF9;--gray-200:#8E8E8E;--gray-300:#989898;--gray-400:#808080;--grey-500:#919191;--yellow-500:#FFFBB0;--blue-500:#7CB5E6}.button-primary{background-color:var(--blue)!important;border-radius:50px;gap:8px;color:var(--white)!important;border:none}.mat-primary-background{padding:9px 40px;width:310px;cursor:pointer}.date{font-size:12px;line-height:14px;letter-spacing:-.02em;color:var(--gray-300)}.justify-end{display:flex;justify-content:flex-end}.card-container{margin:15px 2px;padding:14px 10px 20px 14px;box-shadow:0 0 4px rgba(0,0,0,.15);border-radius:10px;background:var(--white)}.title{font-size:24px;line-height:29px;letter-spacing:-.02em;margin-bottom:18px}.levelsTitle{font-size:14px;line-height:24px;letter-spacing:-.02em;color:var(--black)}.panel{box-shadow:0 0!important;padding:1px 3px 1px 0;pointer-events:none}.panel-header{padding:0!important;background:0 0!important}.panel-header-description{margin:0!important;padding:1px}.pointer-events{pointer-events:all;cursor:pointer}.arrowReverse{transform:rotateX(180deg)}.level{width:47px;max-width:16.6%;height:36px;display:flex;justify-content:center;align-items:center;box-shadow:0 0 2.17333px #00000040}.log-header{font-size:14px;line-height:24px;letter-spacing:-.02em;color:var(--black)}.log{font-style:italic;font-size:14px;line-height:16px;letter-spacing:-.02em;color:var(--gray-400);border-bottom:1px solid #ddd;padding-bottom:9px;margin-top:10px}.log-date{font-style:normal;font-size:12px;line-height:14px;letter-spacing:-.02em;color:var(--gray-400)}::ng-deep .mat-expansion-panel-body{padding:0!important}:host ::ng-deep .mat-content{display:unset!important}.hideContent{display:none}"]
    })
], GainedComptencyCardComponent);
export { GainedComptencyCardComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2FpbmVkLWNvbXB0ZW5jeS1jYXJkLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BhYXN0cmlrYV9ucG1qcy9jb21wdGVuY3kvY29tcGV0ZW5jeS8iLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvZ2FpbmVkLWNvbXB0ZW5jeS1jYXJkL2dhaW5lZC1jb21wdGVuY3ktY2FyZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsTUFBTSxlQUFlLENBQUM7QUFFbEQsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUNoQyxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sK0JBQStCLENBQUM7QUFDOUQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBTzFELElBQWEsNEJBQTRCLEdBQXpDLE1BQWEsNEJBQTRCO0lBTXZDLFlBQ1MsYUFBNEI7UUFBNUIsa0JBQWEsR0FBYixhQUFhLENBQWU7UUFKckMsWUFBTyxHQUFHLEtBQUssQ0FBQTtRQUNmLG1CQUFjLEdBQVksS0FBSyxDQUFDO1FBTTlCLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxXQUFXLEVBQUUsQ0FBQTtJQUN0QyxDQUFDO0lBRUQsUUFBUTtRQUNOLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFBO1FBQ25CLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQTtRQUNyQyxNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQTtRQUM5QyxRQUFRLENBQUMsQ0FBQyxTQUFTLEVBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxHQUFHLEVBQUMsRUFBRTtZQUNsRCxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLHdCQUF3QixDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUE7WUFDekcsSUFBSSxDQUFDLG9CQUFvQixHQUFHLFFBQVEsQ0FBQTtZQUNwQyxJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQTtRQUN0QixDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUM7SUFFTyxrQkFBa0I7UUFDeEIsTUFBTSxPQUFPLEdBQUc7WUFDZCxTQUFTLEVBQUU7Z0JBQ1QsVUFBVSxFQUFFLFlBQVk7YUFDekI7U0FDRixDQUFDO1FBQ0YsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxDQUFBO0lBQ3RELENBQUM7SUFHTyxZQUFZO1FBQ2xCLE1BQU0sT0FBTyxHQUFHO1lBQ2QsUUFBUSxFQUFFO2dCQUNSLE1BQU0sRUFBRSxZQUFZO2FBQ3JCO1NBQ0YsQ0FBQztRQUNGLE9BQVEsSUFBSSxDQUFDLGFBQWEsQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUE7SUFDcEQsQ0FBQztDQUNGLENBQUE7O1lBbkN5QixhQUFhOztBQVAxQiw0QkFBNEI7SUFMeEMsU0FBUyxDQUFDO1FBQ1QsUUFBUSxFQUFFLDJCQUEyQjtRQUNyQywwbUdBQXFEOztLQUV0RCxDQUFDO0dBQ1csNEJBQTRCLENBMEN4QztTQTFDWSw0QkFBNEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgcGlwZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgZm9ya0pvaW4gfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IEdhaW5lZFNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9nYWluZWQuc2VydmljZSc7XG5pbXBvcnQgeyBSZXF1ZXN0VXRpbCB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL3JlcXVlc3QtdXRpbCc7XG5pbXBvcnQgKiBhcyBfIGZyb20gJ2xvZGFzaC1lcyc7XG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdsaWItZ2FpbmVkLWNvbXB0ZW5jeS1jYXJkJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2dhaW5lZC1jb21wdGVuY3ktY2FyZC5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2dhaW5lZC1jb21wdGVuY3ktY2FyZC5jb21wb25lbnQuc2NzcyddXG59KVxuZXhwb3J0IGNsYXNzIEdhaW5lZENvbXB0ZW5jeUNhcmRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuXG4gIHJlcXVlc3RVdGlsOiBhbnlcbiAgbG9hZGluZyA9IGZhbHNlXG4gIHBhbmVsT3BlblN0YXRlOiBCb29sZWFuID0gZmFsc2U7XG4gIGdhaW5lZHByb2ZpY2VuY3lEYXRhOmFueVxuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgZ2FpbmVkU2VydmljZTogR2FpbmVkU2VydmljZVxuXG4gICkge1xuICAgIHRoaXMucmVxdWVzdFV0aWwgPSBuZXcgUmVxdWVzdFV0aWwoKVxuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5sb2FkaW5nID0gdHJ1ZVxuICAgIGNvbnN0IGFsbEVudGl0eSA9IHRoaXMuZ2V0QWxsRW50aXR5KClcbiAgICBjb25zdCB1c2VyUGFzc2Jvb2sgPSB0aGlzLmdldEFsbFVzZXJQYXNzYm9vaygpXG4gICAgZm9ya0pvaW4oW2FsbEVudGl0eSx1c2VyUGFzc2Jvb2tdKS5zdWJzY3JpYmUoKHJlcyk9PntcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gdGhpcy5yZXF1ZXN0VXRpbC5mb3JtYXRlZEdhaW5lZENvbXBldGVuY3kocmVzWzBdLnJlc3VsdC5yZXNwb25zZSwgcmVzWzFdLnJlc3VsdC5jb250ZW50KVxuICAgICAgdGhpcy5nYWluZWRwcm9maWNlbmN5RGF0YSA9IHJlc3BvbnNlXG4gICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZVxuICAgIH0pXG4gIH1cbiBcbiAgcHJpdmF0ZSBnZXRBbGxVc2VyUGFzc2Jvb2soKSB7XG4gICAgY29uc3QgcmVxQm9keSA9IHtcbiAgICAgIFwicmVxdWVzdFwiOiB7XG4gICAgICAgIFwidHlwZU5hbWVcIjogXCJjb21wZXRlbmN5XCJcbiAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiB0aGlzLmdhaW5lZFNlcnZpY2UuZmV0Y2hVc2VyUGFzc2Jvb2socmVxQm9keSlcbiAgfVxuXG5cbiAgcHJpdmF0ZSBnZXRBbGxFbnRpdHkoKSB7XG4gICAgY29uc3QgcmVxQm9keSA9IHtcbiAgICAgIFwic2VhcmNoXCI6IHtcbiAgICAgICAgXCJ0eXBlXCI6IFwiQ29tcGV0ZW5jeVwiXG4gICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gIHRoaXMuZ2FpbmVkU2VydmljZS5mZXRjaEFsbEVudGl0eShyZXFCb2R5KVxuICB9XG59XG4iXX0=