import * as tslib_1 from "tslib";
import { Component } from '@angular/core';
import { forkJoin } from 'rxjs';
import { GainedService } from '../../services/gained.service';
import { RequestUtil } from '../../services/request-util';
var GainedComptencyCardComponent = /** @class */ (function () {
    function GainedComptencyCardComponent(gainedService) {
        this.gainedService = gainedService;
        this.loading = false;
        this.panelOpenState = false;
        this.requestUtil = new RequestUtil();
    }
    GainedComptencyCardComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.loading = true;
        var allEntity = this.getAllEntity();
        var userPassbook = this.getAllUserPassbook();
        forkJoin([allEntity, userPassbook]).subscribe(function (res) {
            var response = _this.requestUtil.formatedGainedCompetency(res[0].result.response, res[1].result.content);
            _this.gainedproficencyData = response;
            _this.loading = false;
        });
    };
    GainedComptencyCardComponent.prototype.getAllUserPassbook = function () {
        var reqBody = {
            "request": {
                "typeName": "competency"
            }
        };
        return this.gainedService.fetchUserPassbook(reqBody);
    };
    GainedComptencyCardComponent.prototype.getAllEntity = function () {
        var reqBody = {
            "search": {
                "type": "Competency"
            }
        };
        return this.gainedService.fetchAllEntity(reqBody);
    };
    GainedComptencyCardComponent.ctorParameters = function () { return [
        { type: GainedService }
    ]; };
    GainedComptencyCardComponent = tslib_1.__decorate([
        Component({
            selector: 'lib-gained-comptency-card',
            template: "<lib-app-loader *ngIf=\"loading === true\"></lib-app-loader>\n<ng-container *ngFor=\"let proficency of gainedproficencyData\">\n<div class=\"card-container example-container container-balanced\">\n    <!-- <div class=\"date justify-end mr-2\">\n        {{date}}\n    </div> -->\n    <ng-container *ngIf=\"proficency?.title\">\n        <div class=\"title\">{{proficency?.title}}</div>\n    </ng-container>\n\n    <div class=\"levelsTitle\">\n        Levels:\n    </div>\n    <mat-accordion>\n        <mat-expansion-panel class=\"w-full panel\" hideToggle (opened)=\"panelOpenState = true\"\n            (closed)=\"panelOpenState = false\">\n            <mat-expansion-panel-header class=\"flex-between items-center panel-header w-full\">\n                <mat-panel-description class=\"panel-header-description\">\n                    <ng-container *ngFor=\"let proficiency of proficency?.proficiencyLevels\">\n                        <ng-container *ngIf=\"proficiency.selected; else addLevel\">\n                            <div class=\"level mb-1\" [ngStyle]=\"{'background-color': proficiency.color}\">\n                                {{proficiency?.displayLevel}}\n                            </div>\n                        </ng-container>\n                        <ng-template #addLevel>\n                            <div (click)=\"$event.stopPropagation();\" class=\"level mb-1 pointer-events\">\n                                {{proficiency?.displayLevel}}\n                            </div>\n                        </ng-template>\n                    </ng-container>\n                    <div class=\"level mb-1 pointer-events\">\n                        <mat-icon [ngClass]=\"{'arrowReverse': panelOpenState }\">keyboard_arrow_down</mat-icon>\n                    </div>\n                </mat-panel-description>\n            </mat-expansion-panel-header>\n            <div>\n                <span class=\"log-header\">Log:</span>\n                <ng-container *ngFor=\"let log of proficency?.logs; let logIndex = index\">\n                    <div class=\"log\">\n                        <div class=\"flex\">\n                            <ng-container *ngIf=\"log.header\">\n                                <span class=\"flex-1\">Level {{log.level}}: {{log.header}}</span>\n                                <span class=\"log-date mr-2\">{{log?.date| date:'dd/MM/yyyy'}}</span>\n                            </ng-container>\n                        </div>\n                        <ng-container *ngIf=\"log.description\">\n                            <div class=\"mt-2\" [ngClass]=\"{'hideContent': !log.keyboardArrowUp}\">{{log.description}}</div>\n                            <div class=\"justify-end\">\n                                <mat-icon (click)=\"log.keyboardArrowUp = !log.keyboardArrowUp\" class=\"mr-3 pointer-events\" [ngClass]=\"{'arrowReverse': log.keyboardArrowUp }\">keyboard_arrow_down</mat-icon>\n                            </div>\n                        </ng-container>\n                    </div>\n                </ng-container>\n            </div>\n        </mat-expansion-panel>\n    </mat-accordion>\n</div>\n</ng-container>",
            styles: [":root{font-size:16px;--blue:#1C5D95;--yellow:#FFF4DF;--teal:#A4DFCA;--black:#000000;--white:#ffffff;--light-gray:#eff6fc;--grey-100:#DFEDF9;--gray-200:#8E8E8E;--gray-300:#989898;--gray-400:#808080;--grey-500:#919191;--yellow-500:#FFFBB0;--blue-500:#7CB5E6}.button-primary{background-color:var(--blue)!important;border-radius:50px;gap:8px;color:var(--white)!important;border:none}.mat-primary-background{padding:9px 40px;width:310px;cursor:pointer}.date{font-size:12px;line-height:14px;letter-spacing:-.02em;color:var(--gray-300)}.justify-end{display:flex;justify-content:flex-end}.card-container{margin:15px 2px;padding:14px 10px 20px 14px;box-shadow:0 0 4px rgba(0,0,0,.15);border-radius:10px;background:var(--white)}.title{font-size:24px;line-height:29px;letter-spacing:-.02em;margin-bottom:18px}.levelsTitle{font-size:14px;line-height:24px;letter-spacing:-.02em;color:var(--black)}.panel{box-shadow:0 0!important;padding:1px 3px 1px 0;pointer-events:none}.panel-header{padding:0!important;background:0 0!important}.panel-header-description{margin:0!important;padding:1px}.pointer-events{pointer-events:all;cursor:pointer}.arrowReverse{transform:rotateX(180deg)}.level{width:47px;max-width:16.6%;height:36px;display:flex;justify-content:center;align-items:center;box-shadow:0 0 2.17333px #00000040}.log-header{font-size:14px;line-height:24px;letter-spacing:-.02em;color:var(--black)}.log{font-style:italic;font-size:14px;line-height:16px;letter-spacing:-.02em;color:var(--gray-400);border-bottom:1px solid #ddd;padding-bottom:9px;margin-top:10px}.log-date{font-style:normal;font-size:12px;line-height:14px;letter-spacing:-.02em;color:var(--gray-400)}::ng-deep .mat-expansion-panel-body{padding:0!important}:host ::ng-deep .mat-content{display:unset!important}.hideContent{display:none}"]
        })
    ], GainedComptencyCardComponent);
    return GainedComptencyCardComponent;
}());
export { GainedComptencyCardComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2FpbmVkLWNvbXB0ZW5jeS1jYXJkLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BhYXN0cmlrYV9ucG1qcy9jb21wdGVuY3kvY29tcGV0ZW5jeS8iLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvZ2FpbmVkLWNvbXB0ZW5jeS1jYXJkL2dhaW5lZC1jb21wdGVuY3ktY2FyZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsTUFBTSxlQUFlLENBQUM7QUFFbEQsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUNoQyxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sK0JBQStCLENBQUM7QUFDOUQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBTzFEO0lBTUUsc0NBQ1MsYUFBNEI7UUFBNUIsa0JBQWEsR0FBYixhQUFhLENBQWU7UUFKckMsWUFBTyxHQUFHLEtBQUssQ0FBQTtRQUNmLG1CQUFjLEdBQVksS0FBSyxDQUFDO1FBTTlCLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxXQUFXLEVBQUUsQ0FBQTtJQUN0QyxDQUFDO0lBRUQsK0NBQVEsR0FBUjtRQUFBLGlCQVNDO1FBUkMsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUE7UUFDbkIsSUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFBO1FBQ3JDLElBQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFBO1FBQzlDLFFBQVEsQ0FBQyxDQUFDLFNBQVMsRUFBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFDLEdBQUc7WUFDL0MsSUFBTSxRQUFRLEdBQUcsS0FBSSxDQUFDLFdBQVcsQ0FBQyx3QkFBd0IsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFBO1lBQ3pHLEtBQUksQ0FBQyxvQkFBb0IsR0FBRyxRQUFRLENBQUE7WUFDcEMsS0FBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUE7UUFDdEIsQ0FBQyxDQUFDLENBQUE7SUFDSixDQUFDO0lBRU8seURBQWtCLEdBQTFCO1FBQ0UsSUFBTSxPQUFPLEdBQUc7WUFDZCxTQUFTLEVBQUU7Z0JBQ1QsVUFBVSxFQUFFLFlBQVk7YUFDekI7U0FDRixDQUFDO1FBQ0YsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxDQUFBO0lBQ3RELENBQUM7SUFHTyxtREFBWSxHQUFwQjtRQUNFLElBQU0sT0FBTyxHQUFHO1lBQ2QsUUFBUSxFQUFFO2dCQUNSLE1BQU0sRUFBRSxZQUFZO2FBQ3JCO1NBQ0YsQ0FBQztRQUNGLE9BQVEsSUFBSSxDQUFDLGFBQWEsQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUE7SUFDcEQsQ0FBQzs7Z0JBbEN1QixhQUFhOztJQVAxQiw0QkFBNEI7UUFMeEMsU0FBUyxDQUFDO1lBQ1QsUUFBUSxFQUFFLDJCQUEyQjtZQUNyQywwbUdBQXFEOztTQUV0RCxDQUFDO09BQ1csNEJBQTRCLENBMEN4QztJQUFELG1DQUFDO0NBQUEsQUExQ0QsSUEwQ0M7U0ExQ1ksNEJBQTRCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IHBpcGUgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGZvcmtKb2luIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBHYWluZWRTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvZ2FpbmVkLnNlcnZpY2UnO1xuaW1wb3J0IHsgUmVxdWVzdFV0aWwgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9yZXF1ZXN0LXV0aWwnO1xuaW1wb3J0ICogYXMgXyBmcm9tICdsb2Rhc2gtZXMnO1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbGliLWdhaW5lZC1jb21wdGVuY3ktY2FyZCcsXG4gIHRlbXBsYXRlVXJsOiAnLi9nYWluZWQtY29tcHRlbmN5LWNhcmQuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9nYWluZWQtY29tcHRlbmN5LWNhcmQuY29tcG9uZW50LnNjc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBHYWluZWRDb21wdGVuY3lDYXJkQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcblxuICByZXF1ZXN0VXRpbDogYW55XG4gIGxvYWRpbmcgPSBmYWxzZVxuICBwYW5lbE9wZW5TdGF0ZTogQm9vbGVhbiA9IGZhbHNlO1xuICBnYWluZWRwcm9maWNlbmN5RGF0YTphbnlcbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIGdhaW5lZFNlcnZpY2U6IEdhaW5lZFNlcnZpY2VcblxuICApIHtcbiAgICB0aGlzLnJlcXVlc3RVdGlsID0gbmV3IFJlcXVlc3RVdGlsKClcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMubG9hZGluZyA9IHRydWVcbiAgICBjb25zdCBhbGxFbnRpdHkgPSB0aGlzLmdldEFsbEVudGl0eSgpXG4gICAgY29uc3QgdXNlclBhc3Nib29rID0gdGhpcy5nZXRBbGxVc2VyUGFzc2Jvb2soKVxuICAgIGZvcmtKb2luKFthbGxFbnRpdHksdXNlclBhc3Nib29rXSkuc3Vic2NyaWJlKChyZXMpPT57XG4gICAgICBjb25zdCByZXNwb25zZSA9IHRoaXMucmVxdWVzdFV0aWwuZm9ybWF0ZWRHYWluZWRDb21wZXRlbmN5KHJlc1swXS5yZXN1bHQucmVzcG9uc2UsIHJlc1sxXS5yZXN1bHQuY29udGVudClcbiAgICAgIHRoaXMuZ2FpbmVkcHJvZmljZW5jeURhdGEgPSByZXNwb25zZVxuICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2VcbiAgICB9KVxuICB9XG4gXG4gIHByaXZhdGUgZ2V0QWxsVXNlclBhc3Nib29rKCkge1xuICAgIGNvbnN0IHJlcUJvZHkgPSB7XG4gICAgICBcInJlcXVlc3RcIjoge1xuICAgICAgICBcInR5cGVOYW1lXCI6IFwiY29tcGV0ZW5jeVwiXG4gICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gdGhpcy5nYWluZWRTZXJ2aWNlLmZldGNoVXNlclBhc3Nib29rKHJlcUJvZHkpXG4gIH1cblxuXG4gIHByaXZhdGUgZ2V0QWxsRW50aXR5KCkge1xuICAgIGNvbnN0IHJlcUJvZHkgPSB7XG4gICAgICBcInNlYXJjaFwiOiB7XG4gICAgICAgIFwidHlwZVwiOiBcIkNvbXBldGVuY3lcIlxuICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuICB0aGlzLmdhaW5lZFNlcnZpY2UuZmV0Y2hBbGxFbnRpdHkocmVxQm9keSlcbiAgfVxufVxuIl19